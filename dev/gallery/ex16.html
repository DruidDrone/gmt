

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>(16) Gridding of data, continued &mdash; GMT 6.1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="(17) Images clipped by coastlines" href="ex17.html" />
    <link rel="prev" title="(15) Gridding, contouring, and masking of unconstrained areas" href="ex15.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> GMT
          

          
          </a>

          
            
            
              <div class="version">
                6.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../gallery.html">Example gallery</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../gallery.html#the-50-examples">The 50 Examples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ex01.html">(1) Contour maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex02.html">(2) Image presentations</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex03.html">(3) Spectral estimation and xy-plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex04.html">(4) A 3-D perspective mesh plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex05.html">(5) A 3-D illuminated surface (in bw)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex06.html">(6) Plotting of histograms</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex07.html">(7) A simple location map</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex08.html">(8) A 3-D histogram</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex09.html">(9) Time-series along tracks</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex10.html">(10) A geographical bar graph plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex11.html">(11) A 3-D RGB color cube</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex12.html">(12) Optimal triangulation of data</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex13.html">(13) Plotting of vector fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex14.html">(14) Gridding of data and trend surfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex15.html">(15) Gridding, contouring, and masking of unconstrained areas</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">(16) Gridding of data, continued</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex17.html">(17) Images clipped by coastlines</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex18.html">(18) Volumes and Spatial Selections</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex19.html">(19) Color patterns on maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex20.html">(20) Custom plot symbols</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex21.html">(21) Time-series of RedHat stock price</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex22.html">(22) World-wide seismicity the last 7 days</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex23.html">(23) All great-circle paths lead to Rome</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex24.html">(24) Data selection based on geospatial criteria</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex25.html">(25) Global distribution of antipodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex26.html">(26) General vertical perspective projection</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex27.html">(27) Plotting Sandwell/Smith Mercator img grids</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex28.html">(28) Mixing UTM and geographic data sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex29.html">(29) Gridding spherical surface data using splines</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex30.html">(30) Trigonometric functions plotted in graph mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex31.html">(31) Using non-default fonts in PostScript</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex32.html">(32) Draping an image over topography</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex33.html">(33) Stacking automatically generated cross-profiles</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex34.html">(34) Using country polygons for plotting and shading</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex35.html">(35) Spherical triangulation and distance calculations</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex36.html">(36) Spherical gridding using Renka’s algorithms</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex37.html">(37) Spectral coherence between gravity and bathymetry grids</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex38.html">(38) Histogram equalization of bathymetry grids</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex39.html">(39) Evaluation of spherical harmonics coefficients</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex40.html">(40) Line simplification</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex41.html">(41) Legend with tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex42.html">(42) Antarctica and stereographic data</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex43.html">(43) Robust regression and outlier detection</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex44.html">(44) Map insets</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex45.html">(45) Trend modeling</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex46.html">(46) Day-light terminators and other sunlight parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex47.html">(47) Linear regression using different norms and types</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex48.html">(48) Line networks, map embellishments, and curved titles</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex49.html">(49) Analysis of the Atlantic seafloor depth/age relationship</a></li>
<li class="toctree-l3"><a class="reference internal" href="ex50.html">(50) Probability distributions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gallery.html#animations">Animations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">The GMT Tutorial</a></li>
<li class="toctree-l1"><a class="reference external" href="https://doi.org/10.1029/2019GC008515">Modern Mode Primer</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">GMT Core Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supplements.html">GMT Supplemental Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook.html">The GMT Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../std_opts.html">Common Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proj_codes.html">Projection Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gmt.conf.html">GMT Defaults</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datasets.html">Datasets</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Users_contrib_script.html">Users Script Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Users_contrib_symbols.html">Users Symbol Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compatibility.html">Incompatibilities between GMT 5 and GMT 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../switching.html">Switching between different GMT versions</a></li>
</ul>
<p class="caption"><span class="caption-text">Classic Mode</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../std_opts_classic.html">Common Options (Classic Mode)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules_classic.html">GMT Core Modules (Classic Mode)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supplements_classic.html">GMT Supplemental Modules (Classic Mode)</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">GMT C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../postscriptlight.html">postscriptlight</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GMT</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../gallery.html">Example gallery</a> &raquo;</li>
        
      <li>(16) Gridding of data, continued</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/GenericMappingTools/gmt/blob/6.1/doc/rst/source/gallery/ex16.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="gridding-of-data-continued">
<span id="example-16"></span><h1>(16) Gridding of data, continued<a class="headerlink" href="#gridding-of-data-continued" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="../contour.html"><span class="doc">contour</span></a> (for contouring) and
<a class="reference internal" href="../triangulate.html"><span class="doc">triangulate</span></a> (for gridding) use the
simplest method of interpolating data: a Delaunay triangulation (see
Example <a class="reference internal" href="ex12.html#example-12"><span class="std std-ref">(12) Optimal triangulation of data</span></a>) which forms <em>z(x, y)</em> as a
union of planar triangular facets. One advantage of this method is that
it will not extrapolate <em>z(x, y)</em> beyond the convex hull of the
input (<em>x, y</em>) data. Another is that it will not estimate a <em>z</em> value
above or below the local bounds on any triangle. A disadvantage is that
the <em>z(x, y)</em> surface is not differentiable, but has sharp kinks
at triangle edges and thus also along contours. This may not look
physically reasonable, but it can be filtered later (last panel below).
<a class="reference internal" href="../surface.html"><span class="doc">surface</span></a> can be used to generate a
higher-order (smooth and differentiable) interpolation of
<em>z(x, y)</em> onto a grid, after which the grid may be illustrated
(<a class="reference internal" href="../grdcontour.html"><span class="doc">grdcontour</span></a>, <a class="reference internal" href="../grdimage.html"><span class="doc">grdimage</span></a>,
<a class="reference internal" href="../grdview.html"><span class="doc">grdview</span></a>).
<a class="reference internal" href="../surface.html"><span class="doc">surface</span></a> will interpolate to all (<em>x,
y</em>) points in a rectangular region, and thus will extrapolate beyond the
convex hull of the data. However, this can be masked out in various ways
(see Example <a class="reference internal" href="ex15.html#example-15"><span class="std std-ref">(15) Gridding, contouring, and masking of unconstrained areas</span></a>).</p>
<p>A more serious objection is that <a class="reference internal" href="../surface.html"><span class="doc">surface</span></a> may estimate <em>z</em> values
outside the local range of the data (note area near <em>x</em> = 0.8, <em>y</em> =
5.3). This commonly happens when the default tension value of zero is
used to create a “minimum curvature” (most smooth) interpolant.
<a class="reference internal" href="../surface.html"><span class="doc">surface</span></a> can be used with non-zero
tension to partially overcome this problem. The limiting value
<em>tension = 1</em> should approximate the triangulation, while a value
between 0 and 1 may yield a good compromise between the above two cases.
A value of 0.5 is shown in the Figure <a class="reference internal" href="#fig-ex16"><span class="std std-ref">More ways to grid data</span></a>. A side
effect of the tension is that it tends to make the contours turn near
the edges of the domain so that they approach the edge from a
perpendicular direction. A solution is to use
<a class="reference internal" href="../surface.html"><span class="doc">surface</span></a> in a larger area and then use
<a class="reference internal" href="../grdcut.html"><span class="doc">grdcut</span></a> to cut out the desired smaller
area. Another way to achieve a compromise is to interpolate the data to
a grid and then filter the grid using <a class="reference internal" href="../grdfft.html"><span class="doc">grdfft</span></a> or
<a class="reference internal" href="../grdfilter.html"><span class="doc">grdfilter</span></a>. The latter can handle
grids containing “NaN” values and it can do median and mode filters as
well as convolutions. Shown here is <a class="reference internal" href="../triangulate.html"><span class="doc">triangulate</span></a> followed by
<a class="reference internal" href="../grdfilter.html"><span class="doc">grdfilter</span></a>. Note that the filter has
done some extrapolation beyond the convex hull of the original <em>x, y</em>
values. The “best” smooth approximation of <em>z(x, y)</em> depends on
the errors in the data and the physical laws obeyed by <em>z</em>. GMT cannot
always do the “best” thing but it offers great flexibility through its
combinations of tools. We illustrate all four solutions using a CPT
that contains color fills, predefined patterns for interval (900,925)
and NaN, an image pattern for interval (875,900), and a “skip slice”
request for interval (700,725).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>
<span class="c1">#		GMT EXAMPLE 16</span>
<span class="c1">#</span>
<span class="c1"># Purpose:	Illustrates interpolation methods using same data as Example 12.</span>
<span class="c1"># GMT modules:	gmtset, grdview, grdfilter, contour, colorbar, surface, triangulate</span>
<span class="c1"># Unix progs:	rm</span>
<span class="c1">#</span>
gmt begin ex16
  gmt <span class="nb">set</span> FONT_ANNOT_PRIMARY 9p FONT_TITLE 18p,Times-Roman
  gmt subplot begin 2x2 -M0.05i -Fs3.25i/0 -R0/6.5/-0.2/6.5 -Jx1i -SCb -SRl+t -Bwesn -Y2i -T<span class="s2">&quot;Gridding of Data&quot;</span>
    gmt contour @Table_5_11.txt -C@ex_16.cpt -I -B+t<span class="s2">&quot;contour (triangulate)&quot;</span> -c0,0
    <span class="c1">#</span>
    gmt surface @Table_5_11.txt -R0/6.5/-0.2/6.5 -I0.2 -Graws0.nc
    gmt grdview raws0.nc -C@ex_16.cpt -Qs -B+t<span class="s2">&quot;surface (tension = 0)&quot;</span> -c0,1
    <span class="c1">#</span>
    gmt surface @Table_5_11.txt -Graws5.nc -T0.5
    gmt grdview raws5.nc -C@ex_16.cpt -Qs -B+t<span class="s2">&quot;surface (tension = 0.5)&quot;</span> -c1,0
    <span class="c1">#</span>
    gmt triangulate @Table_5_11.txt -Grawt.nc
    gmt grdfilter rawt.nc -Gfiltered.nc -D0 -Fc1
    gmt grdview filtered.nc -C@ex_16.cpt -Qs -B+t<span class="s2">&quot;triangulate @~\256@~ grdfilter&quot;</span> -c1,1
  gmt subplot end
  gmt colorbar -DJBC+w5i/0.25i+h -C@ex_16.cpt
gmt end
rm -f raws0.nc raws5.nc rawt.nc filtered.nc
</pre></div>
</div>
<div class="figure align-center" id="id1">
<span id="fig-ex16"></span><a class="reference internal image-reference" href="../_images/ex16.png"><img alt="../_images/ex16.png" src="../_images/ex16.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">More ways to grid data</span></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ex17.html" class="btn btn-neutral float-right" title="(17) Images clipped by coastlines" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ex15.html" class="btn btn-neutral float-left" title="(15) Gridding, contouring, and masking of unconstrained areas" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, The GMT Team.
      <span class="lastupdated">
        Last updated on Sep 17, 2019.
      </span>

    </p>
  </div>
    
    
      Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>